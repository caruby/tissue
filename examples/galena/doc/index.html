<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Documentation by YARD 0.6.1</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Galena caRuby Tissue example</h1>

<h2>Synopsis</h2>

<p>This directory contains the caRuby Tissue example for the hypothetical Galena Cancer Center.
The example files are a useful template for building your own migrator.</p>

<p>The Galena example demonstrates how to load the content of a custom tissue bank into caTissue.
The use cases illustrate several common migration impediments:</p>

<ul>
<li>Different terminology than caTissue</li>
<li>Different associations than caTissue</li>
<li>Incomplete input for caTissue</li>
<li>Denormalized input</li>
<li>Inconsistent input</li>
<li>Input data scrubbing</li>
<li>Aliquot inference</li>
<li>Pre-defined caTissue protocol</li>
</ul>


<h2>Setup</h2>

<ol>
<li><p>Run the <code>crtexample --list</code> command to display the Galena example location.</p></li>
<li><p>Copy the example into a location of your choosing.</p></li>
<li><p>Configure a caTissue client to connect to a test caTissue instance, as described in the
caTissue Technical Guide.</p></li>
<li><p>Define the caRuby Tissue access property file as described in the configuration
<a href="how-do-i-configure-caruby-to-work-with-catissue">FAQ</a>.</p></li>
</ol>


<h2>Migration</h2>

<p>The example migration input data resides in the <code>data</code> directory.
Each CSV input file holds one row for each specimen.</p>

<p>Each example has a field mapping configuration in the <code>conf/migration</code> directory.
For example, the <code>simple.csv</code> input file is migrated into caTissue using the
<code>simple_migration.yaml</code> configuration file.</p>

<p>Migrate the Galena <code>simple</code> example as follows:</p>

<ol>
<li><p>Open a console in the copied Galena example location.</p></li>
<li><p>Run the following:</p>

<p>   bin/seed</p>

<p>This command initializes the administrative objects in the Galena test database,
including the Galena collection protocol, site, cancer center, tissue bank and coordinator.</p></li>
<li><p>Run the following:</p>

<p>   crtmigrate --target TissueSpecimen --mapping conf/migration/simple_fields.yaml data/simple.csv</p>

<p>This command migrates the CSV record in the <code>simple.csv</code> input file into a caTissue
<code>TissueSpecimen</code> based on the <code>simple_fields.yaml</code> mapping file.
The command will take a couple of minutes to finish, since the less information
you provide caRuby the more it works to fill in the missing bits. In the meantime,
peruse the configuration and data files to see which data are migrated and
where this data ends up in caTissue.</p></li>
<li><p>Open the caTissue application on the test server and verify the content of the
Galena CP collection protocol.</p></li>
</ol>


<p>The other examples are run in a similar manner. Each example demonstrates different
features of the caRuby Migration utility as follows:</p>

<ul>
<li>simple - a good starting point with limited input fields</li>
<li>minimal - the fewest possible input fields without writing custom Ruby shim code</li>
<li>general - lots of input fields, no custom Ruby code</li>
<li>filter - a smattering of custom Ruby shim code to convert input values to caTissue values</li>
<li>frozen - an example demonstrating how to import storage locations</li>
</ul>


<p>Try running an example with the <code>--debug</code> flag and look at the <code>log/migration.log</code> file to see
what caRuby is up to behind the scenes (hint: a lot!).</p>

<h2>Input data</h2>

<p>The sample Galena Tissue Bank CSV input files hold one row for each specimen.
Common fields are as follows:</p>

<ul>
<li>MRN - Patient Medical Record Number</li>
<li>Initials - Patient name initials</li>
<li>Frozen? - Flag indicating whether the specimen is frozen</li>
<li>SPN - Surgical Pathology Number</li>
<li>Collection Date - Date the specimen was acquired by the tissue bank</li>
<li>Received Date - Date the specimen was donated by the participant</li>
<li>Quantity - Amount collected</li>
<li>Box - Tissue storage container</li>
<li>X - the tissue box column</li>
<li>Y - the tissue box row</li>
</ul>
</div></div>
    
    <div id="footer">
  Generated on Mon Nov 29 19:32:23 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.6).
</div>

  </body>
</html>